import{r as o,j as e}from"./index-B_OPaOyb.js";import{c as de,S as le,i as X,b as h,D,M as ce}from"./Sidebar-BN_K4hAM.js";import{L as xe}from"./layout-panel-left-K445IE6E.js";import{L as K}from"./layers-DGnuC7Zx.js";import{C as pe}from"./chevron-down-ClltgbQ9.js";import{R as he}from"./refresh-cw-ArZ6UI2R.js";import{B as O}from"./box-CPANDE_Y.js";import{C as Q}from"./circle-DiOm2bkO.js";import{Z as me,a as be}from"./zoom-out-DuIfGTno.js";import{L as ue}from"./loader-circle-B4C5lNkV.js";import{I as fe}from"./info-BFlN94ny.js";import{T as ge}from"./tag-Dnmkg-QI.js";import{C as we}from"./clock-KxAAZb-S.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ve=de("arrow-right",je),M=220,k=50,Ne=200,ye=80;function ke(m,N){if(m.length===0)return[];const d=new Map,u=new Map;m.forEach(i=>{d.set(i.id,[]),u.set(i.id,[])}),N.forEach(i=>{var l,b;(l=d.get(i.origin))==null||l.push(i.destination),(b=u.get(i.destination))==null||b.push(i.origin)});const c=new Map,p=[];for(m.forEach(i=>{(u.get(i.id)||[]).length===0&&(c.set(i.id,0),p.push(i.id))}),p.length===0&&m.forEach((i,l)=>c.set(i.id,l%3));p.length>0;){const i=p.shift(),l=c.get(i);(d.get(i)||[]).forEach(b=>{const w=c.get(b);(w===void 0||w<l+1)&&(c.set(b,l+1),p.push(b))})}const f=new Map;return m.map(i=>{const l=c.get(i.id)||0,b=f.get(l)||0;return f.set(l,b+1),{...i,x:l*(M+Ne)+60,y:b*(k+ye)+60,layer:l}})}function V(m,N){const d=m.x+M,u=m.y+k/2,c=N.x,p=N.y+k/2,f=(d+c)/2;return`M ${d} ${u} C ${f} ${u}, ${f} ${p}, ${c} ${p}`}function Fe(){const[m,N]=o.useState([]),[d,u]=o.useState(""),[c,p]=o.useState([]),[f,S]=o.useState([]),[i,l]=o.useState([]),[b,w]=o.useState([]),[s,$]=o.useState(null),[L,F]=o.useState(null),[R,I]=o.useState(!0),[P,U]=o.useState(!1),[G,y]=o.useState(null),[A,W]=o.useState(!1),[ee,C]=o.useState(1),[E,T]=o.useState({x:0,y:0}),[B,H]=o.useState(!1),z=o.useRef({x:0,y:0}),te=o.useRef(null),j=o.useCallback(async(t,r)=>{const a=await t.json().catch(()=>({}));if(!t.ok){const n=typeof(a==null?void 0:a.detail)=="string"&&a.detail||typeof(a==null?void 0:a.error)=="string"&&a.error||`${r} (HTTP ${t.status})`;throw new Error(n)}if(typeof(a==null?void 0:a.error)=="string"&&a.error.trim().length>0)throw new Error(a.error);return a},[]),_=o.useCallback(async()=>{try{I(!0),y(null);const t=await fetch("/api/lineage?action=namespaces"),a=(await j(t,"Failed to fetch namespaces")).namespaces||[];N(a),a.length>0&&!d&&u(a[0].name),a.length===0&&(u(""),p([]),S([]),l([]),w([]))}catch(t){y(t instanceof Error?t.message:"Failed to fetch namespaces")}finally{I(!1)}},[j,d]),J=o.useCallback(async t=>{try{y(null);const[r,a]=await Promise.all([fetch(`/api/lineage?action=jobs&ns=${encodeURIComponent(t)}`),fetch(`/api/lineage?action=datasets&ns=${encodeURIComponent(t)}`)]),[n,x]=await Promise.all([j(r,`Failed to fetch jobs for namespace ${t}`),j(a,`Failed to fetch datasets for namespace ${t}`)]);p(n.jobs||[]),S(x.datasets||[])}catch(r){console.error("Failed to fetch namespace data",r),p([]),S([]),l([]),w([]),$(null),y(r instanceof Error?r.message:"Failed to fetch namespace data")}},[j]),Y=o.useCallback(async t=>{try{U(!0),y(null);const r=await fetch(`/api/lineage?action=lineage&nodeId=${encodeURIComponent(t)}&depth=10`),n=(await j(r,"Failed to fetch lineage graph")).graph||[],x=n.map(g=>({id:g.id,type:g.type,data:g.data,inEdges:g.inEdges||[],outEdges:g.outEdges||[]})),v=[];n.forEach(g=>{(g.outEdges||[]).forEach(ne=>{v.push({origin:g.id,destination:ne.destination})})});const oe=ke(x,v);l(oe),w(v),T({x:40,y:40}),C(.85)}catch(r){y(r instanceof Error?r.message:"Failed to fetch lineage")}finally{U(!1)}},[j]);o.useEffect(()=>{_()},[_]),o.useEffect(()=>{d&&($(null),l([]),w([]),J(d))},[d,J]);const se=t=>{t.button===0&&(H(!0),z.current={x:t.clientX-E.x,y:t.clientY-E.y})},ae=t=>{B&&T({x:t.clientX-z.current.x,y:t.clientY-z.current.y})},Z=()=>H(!1),re=t=>{t.preventDefault();const r=t.deltaY>0?-.05:.05;C(a=>Math.max(.2,Math.min(3,a+r)))},ie=t=>t.type==="DATASET"?{fill:L===t.id?"var(--color-obsidian-panel-header)":"var(--color-obsidian-panel)",stroke:(s==null?void 0:s.id)===t.id?"#38bdf8":"var(--color-obsidian-border)",iconColor:"#38bdf8"}:{fill:L===t.id?"var(--color-obsidian-panel-header)":"var(--color-obsidian-panel)",stroke:(s==null?void 0:s.id)===t.id?"#818cf8":"var(--color-obsidian-border)",iconColor:"#818cf8"},q=t=>{switch(t==null?void 0:t.toUpperCase()){case"COMPLETED":case"SUCCESS":return"var(--color-obsidian-success)";case"FAILED":return"var(--color-obsidian-danger)";case"RUNNING":return"var(--color-obsidian-warning)";case"ABORTED":return"var(--color-obsidian-muted)";default:return"var(--color-obsidian-muted)"}};return e.jsxs("div",{className:"flex h-screen bg-[#09090b] text-foreground font-sans overflow-hidden relative",style:{fontFamily:"'Inter', -apple-system, sans-serif"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-[800px] h-[800px] bg-purple-500/5 rounded-full blur-[120px] pointer-events-none -translate-x-1/4 -translate-y-1/4 z-0"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[600px] h-[600px] bg-sky-500/5 rounded-full blur-[100px] pointer-events-none translate-x-1/4 -translate-y-1/4 z-0"}),e.jsx("div",{className:"relative z-10 shrink-0",children:e.jsx(le,{})}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative z-10",children:[e.jsxs("div",{className:"flex items-center px-4 justify-between shrink-0 h-10 bg-black/60 border-b border-obsidian-border/30 z-10 w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[12px]",children:[e.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openclaw:toggle-sidebar")),className:"p-1.5 hover:bg-white/10 rounded-md text-obsidian-muted hover:text-white transition-all active:scale-95 border border-transparent hover:border-obsidian-border/50",title:"Toggle Explorer",children:e.jsx(xe,{className:"w-4 h-4 drop-shadow-[0_0_8px_rgba(255,255,255,0.2)]"})}),e.jsx("div",{className:"w-[1px] h-4 bg-obsidian-border/50"}),e.jsx(X,{className:"w-4 h-4 text-indigo-400 drop-shadow-[0_0_8px_rgba(129,140,248,0.5)]"}),e.jsx("span",{className:"text-white font-semibold tracking-wide",children:"Data Lineage"}),e.jsx("span",{className:"text-obsidian-muted/50",children:"·"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>W(!A),className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#18181b] border border-obsidian-border/50 rounded-md text-[11px] font-medium hover:border-white/20 hover:bg-[#27272a] transition-all active:scale-95 shadow-sm",children:[e.jsx(K,{className:"w-3 h-3 text-indigo-400"}),e.jsx("span",{className:h(d?"text-white/90":"text-obsidian-muted"),children:d||"Select Namespace"}),e.jsx(pe,{className:h("w-3.5 h-3.5 text-obsidian-muted transition-transform duration-200",A&&"rotate-180")})]}),A&&e.jsxs("div",{className:"absolute top-9 left-0 mt-1 bg-[#18181b]/95 backdrop-blur-xl border border-obsidian-border/50 rounded-lg shadow-2xl z-50 min-w-[200px] overflow-hidden flex flex-col",children:[m.map(t=>e.jsx("button",{onClick:()=>{u(t.name),W(!1)},className:h("w-full text-left px-3 py-2.5 text-[11px] transition-all border-l-2 border-transparent hover:bg-white/5",d===t.name?"bg-indigo-500/10 border-indigo-500 text-white font-medium":"text-obsidian-muted hover:text-white"),children:t.name},t.name)),m.length===0&&e.jsx("div",{className:"px-3 py-3 text-[10px] text-obsidian-muted italic text-center",children:"No namespaces found"})]})]}),e.jsx("span",{className:"text-obsidian-muted/50",children:"·"}),e.jsxs("span",{className:"text-obsidian-muted font-mono bg-white/5 px-2 py-0.5 rounded",children:[c.length," jobs"]}),e.jsxs("span",{className:"text-obsidian-muted font-mono bg-white/5 px-2 py-0.5 rounded",children:[f.length," datasets"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:_,className:"p-1.5 hover:bg-white/10 rounded-md text-obsidian-muted hover:text-white transition-colors border border-transparent hover:border-white/10",title:"Refresh",children:e.jsx(he,{className:"w-3.5 h-3.5"})})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden bg-transparent",children:[e.jsxs("div",{className:"w-[280px] border-r border-obsidian-border/30 flex flex-col bg-black/20 backdrop-blur-xl overflow-hidden shrink-0 shadow-[4px_0_24px_rgba(0,0,0,0.4)] z-10 transition-all duration-300",children:[e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col border-b border-obsidian-border/30",children:[e.jsxs("div",{className:"px-4 py-3 text-[10px] font-bold text-obsidian-muted uppercase tracking-widest flex items-center justify-between bg-black/40 shrink-0 shadow-sm border-b border-obsidian-border/20 sticky top-0 z-10 backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(O,{className:"w-3.5 h-3.5 text-indigo-400"}),"Jobs"]}),e.jsx("span",{className:"bg-white/10 px-1.5 py-0.5 rounded text-white/70",children:c.length})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto w-full custom-scrollbar",children:[c.map(t=>{var a;const r=(s==null?void 0:s.id)===`job:${d}:${t.name}`;return e.jsxs("button",{onClick:()=>Y(`job:${d}:${t.name}`),className:h("w-full text-left px-4 py-2.5 text-[11.5px] flex items-center gap-2.5 group transition-colors border-l-[3px]",r?"bg-indigo-500/10 border-indigo-400 text-white font-medium shadow-[inset_0_1px_0_rgba(255,255,255,0.02)]":"bg-transparent border-transparent hover:bg-white/5 text-obsidian-muted hover:text-white/90"),children:[e.jsx(Q,{className:h("w-2 h-2 flex-shrink-0 transition-colors",r?"text-indigo-400":""),style:{color:r?void 0:q((a=t.latestRun)==null?void 0:a.state)}}),e.jsx("span",{className:"truncate flex-1",children:t.name})]},t.name)}),c.length===0&&!R&&e.jsx("div",{className:"px-4 py-6 text-[11px] text-obsidian-muted/50 italic text-center",children:"No jobs in namespace"})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 text-[10px] font-bold text-obsidian-muted uppercase tracking-widest flex items-center justify-between bg-black/40 shrink-0 shadow-sm border-b border-obsidian-border/20 sticky top-0 z-10 backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(D,{className:"w-3.5 h-3.5 text-sky-400"}),"Datasets"]}),e.jsx("span",{className:"bg-white/10 px-1.5 py-0.5 rounded text-white/70",children:f.length})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto w-full pb-6 custom-scrollbar",children:[f.map(t=>{const r=(s==null?void 0:s.id)===`dataset:${d}:${t.name}`;return e.jsxs("button",{onClick:()=>Y(`dataset:${d}:${t.name}`),className:h("w-full text-left px-4 py-2.5 text-[11.5px] flex items-center gap-2.5 group transition-colors border-l-[3px]",r?"bg-sky-500/10 border-sky-400 text-white font-medium shadow-[inset_0_1px_0_rgba(255,255,255,0.02)]":"bg-transparent border-transparent hover:bg-white/5 text-obsidian-muted hover:text-white/90"),children:[e.jsx(D,{className:h("w-3.5 h-3.5 flex-shrink-0 transition-colors",r?"text-sky-400 drop-shadow-[0_0_5px_rgba(56,189,248,0.4)]":"text-sky-400/50 group-hover:text-sky-400/80")}),e.jsx("span",{className:"truncate flex-1",children:t.name})]},t.name)}),f.length===0&&!R&&e.jsx("div",{className:"px-4 py-6 text-[11px] text-obsidian-muted/50 italic text-center",children:"No datasets in namespace"})]})]})]}),e.jsxs("div",{className:"flex-1 relative bg-transparent overflow-hidden",children:[e.jsxs("div",{className:"absolute top-3 right-3 z-20 flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>C(t=>Math.min(3,t+.15)),className:"p-1.5 bg-obsidian-panel border border-obsidian-border rounded hover:bg-obsidian-panel-hover transition-colors",children:e.jsx(me,{className:"w-3.5 h-3.5 text-foreground"})}),e.jsx("button",{onClick:()=>C(t=>Math.max(.2,t-.15)),className:"p-1.5 bg-obsidian-panel border border-obsidian-border rounded hover:bg-obsidian-panel-hover transition-colors",children:e.jsx(be,{className:"w-3.5 h-3.5 text-foreground"})}),e.jsx("button",{onClick:()=>{C(.85),T({x:40,y:40})},className:"p-1.5 bg-obsidian-panel border border-obsidian-border rounded hover:bg-obsidian-panel-hover transition-colors",children:e.jsx(ce,{className:"w-3.5 h-3.5 text-foreground"})})]}),R||P?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(ue,{className:"w-6 h-6 text-obsidian-purple animate-spin"}),e.jsx("span",{className:"text-[12px] text-obsidian-muted",children:P?"Loading lineage...":"Connecting to Marquez..."})]})}):G?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 max-w-md text-center",children:[e.jsx(fe,{className:"w-8 h-8 text-obsidian-danger"}),e.jsx("span",{className:"text-[12px] text-obsidian-danger",children:G}),e.jsx("button",{onClick:_,className:"px-3 py-1 bg-obsidian-panel border border-obsidian-border rounded text-[11px] hover:bg-obsidian-panel-hover transition-all active:scale-95",children:"Retry"})]})}):i.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 text-center max-w-sm p-8 rounded-2xl bg-black/20 backdrop-blur-md border border-white/5 shadow-2xl",children:[e.jsx("div",{className:"p-4 rounded-full bg-white/5 drop-shadow-[0_0_15px_rgba(255,255,255,0.1)]",children:e.jsx(X,{className:"w-12 h-12 text-obsidian-border"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[16px] font-medium text-foreground mb-2 tracking-tight",children:"Select a node to explore lineage"}),e.jsx("p",{className:"text-[12px] text-obsidian-muted leading-relaxed",children:"Choose any job or dataset from the explorer panel to visualize its upstream and downstream data flow dependencies."})]})]})}):e.jsxs("svg",{ref:te,className:h("w-full h-full",B?"cursor-grabbing":"cursor-grab"),onMouseDown:se,onMouseMove:ae,onMouseUp:Z,onMouseLeave:Z,onWheel:re,children:[e.jsxs("defs",{children:[e.jsx("pattern",{id:"ide-grid",width:"30",height:"30",patternUnits:"userSpaceOnUse",children:e.jsx("circle",{cx:"1",cy:"1",r:"1",fill:"rgba(255,255,255,0.05)"})}),e.jsx("filter",{id:"nodeShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"4",stdDeviation:"6",floodColor:"#000000",floodOpacity:"0.4"})}),e.jsx("filter",{id:"nodeShadowHover",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"6",stdDeviation:"8",floodColor:"#000000",floodOpacity:"0.6"})}),e.jsxs("filter",{id:"glowSelected",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"blur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"edgeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--color-obsidian-border)",stopOpacity:"0.4"}),e.jsx("stop",{offset:"50%",stopColor:"var(--color-obsidian-info)",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"var(--color-obsidian-border)",stopOpacity:"0.4"})]}),e.jsx("style",{children:`
                                            @keyframes flowAnim {
                                                to { stroke-dashoffset: -40; }
                                            }
                                        `})]}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#ide-grid)",pointerEvents:"none"}),e.jsxs("g",{transform:`translate(${E.x}, ${E.y}) scale(${ee})`,children:[b.map((t,r)=>{const a=i.find(v=>v.id===t.origin),n=i.find(v=>v.id===t.destination);if(!a||!n)return null;const x=s&&(s.id===a.id||s.id===n.id);return e.jsxs("g",{children:[e.jsx("path",{d:V(a,n),fill:"none",stroke:"transparent",strokeWidth:10}),e.jsx("path",{d:V(a,n),fill:"none",stroke:x?"url(#edgeGradient)":"var(--color-obsidian-border)",strokeWidth:x?2.5:1.5,opacity:x?1:.3,strokeDasharray:x?"4 8":"none",style:x?{animation:"flowAnim 1.5s linear infinite"}:{}}),e.jsx("circle",{cx:n.x,cy:n.y+k/2,r:x?4:3,fill:x?"var(--color-obsidian-info)":"var(--color-obsidian-muted)",filter:x?"url(#glowSelected)":void 0})]},r)}),i.map(t=>{const r=ie(t),a=t.data.name.length>28?t.data.name.slice(0,12)+"..."+t.data.name.slice(-12):t.data.name,n=(s==null?void 0:s.id)===t.id,x=L===t.id;return e.jsxs("g",{transform:`translate(${t.x}, ${t.y})`,onClick:()=>$(t),onMouseEnter:()=>F(t.id),onMouseLeave:()=>F(null),className:"cursor-pointer transition-all duration-300",children:[n&&e.jsx("rect",{x:-4,y:-4,width:M+8,height:k+8,rx:10,fill:"none",stroke:r.stroke,strokeWidth:2,filter:"url(#glowSelected)",opacity:.7}),e.jsx("foreignObject",{x:"0",y:"0",width:M,height:k,children:e.jsxs("div",{className:h("w-full h-full rounded-lg border flex flex-col justify-center px-3 relative overflow-hidden transition-all duration-300",n?"bg-black/80 shadow-[0_0_20px_rgba(0,0,0,0.5)] border-transparent":"bg-obsidian-panel/80 hover:bg-obsidian-panel shadow-lg",x&&!n?"border-white/20":"border-obsidian-border/50"),style:{backdropFilter:"blur(8px)",borderColor:n?r.stroke:void 0},children:[n&&e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] opacity-80",style:{background:`linear-gradient(90deg, transparent, ${r.stroke}, transparent)`}}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:h("p-1.5 rounded-md shrink-0 transition-colors",n?"bg-white/10":"bg-black/20"),children:t.type==="DATASET"?e.jsx(D,{className:"w-4 h-4",style:{color:r.iconColor}}):e.jsx(O,{className:"w-4 h-4",style:{color:r.iconColor}})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:h("text-[12px] truncate transition-colors",n?"text-white font-semibold":"text-foreground font-medium"),children:a}),e.jsx("span",{className:"text-[9px] text-obsidian-muted uppercase tracking-wider font-mono",children:t.type})]})]})]})})]},t.id)})]})]}),i.length>0&&e.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-5 text-[10px] text-white/60 bg-[#18181b]/90 backdrop-blur-md px-4 py-2 rounded-lg border border-white/10 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm bg-sky-500/20 border border-sky-500/50"}),"Dataset"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm bg-indigo-500/20 border border-indigo-500/50"}),"Job"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-3.5 h-3.5 text-white/40"}),"Data Flow"]})]})]}),s&&e.jsxs("div",{className:"w-[320px] border-l border-white/5 flex flex-col bg-black/20 backdrop-blur-xl overflow-hidden shrink-0 shadow-[-4px_0_24px_rgba(0,0,0,0.4)] z-10 transition-all duration-300 transform translate-x-0",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-white/5 bg-black/40 shadow-sm shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-2.5",children:[s.type==="DATASET"?e.jsx(D,{className:"w-4.5 h-4.5 text-sky-400 drop-shadow-[0_0_8px_rgba(56,189,248,0.3)]"}):e.jsx(O,{className:"w-4.5 h-4.5 text-indigo-400 drop-shadow-[0_0_8px_rgba(129,140,248,0.3)]"}),e.jsx("span",{className:"text-[14px] font-semibold text-white tracking-wide truncate",children:s.data.name})]}),e.jsx("span",{className:h("text-[9px] px-2 py-0.5 rounded font-mono font-bold tracking-widest uppercase shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]",s.type==="DATASET"?"bg-sky-500/10 border border-sky-500/20 text-sky-400":"bg-indigo-500/10 border border-indigo-500/20 text-indigo-400"),children:s.type})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4 text-[11px] custom-scrollbar",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-obsidian-muted text-[10px] uppercase tracking-wider mb-1 flex items-center gap-1",children:[e.jsx(K,{className:"w-3.5 h-3.5"})," Namespace"]}),e.jsx("div",{className:"text-foreground",children:s.data.namespace})]}),s.data.type&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-obsidian-muted text-[10px] uppercase tracking-wider mb-1 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3.5 h-3.5"})," Type"]}),e.jsx("div",{className:"text-foreground",children:s.data.type})]}),s.data.description&&e.jsxs("div",{children:[e.jsx("div",{className:"text-obsidian-muted text-[10px] uppercase tracking-wider mb-1",children:"Description"}),e.jsx("div",{className:"text-foreground",children:s.data.description})]}),s.data.updatedAt&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-obsidian-muted text-[10px] uppercase tracking-wider mb-1 flex items-center gap-1",children:[e.jsx(we,{className:"w-3.5 h-3.5"})," Updated"]}),e.jsx("div",{className:"text-foreground",children:new Date(s.data.updatedAt).toLocaleString()})]}),s.type==="DATASET"&&s.data.fields&&s.data.fields.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-obsidian-muted text-[10px] uppercase tracking-wider mb-1",children:["Columns (",s.data.fields.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.data.fields.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[e.jsx("span",{className:"text-foreground",children:t.name}),e.jsx("span",{className:"text-[9px] px-1 py-[1px] rounded bg-obsidian-info/10 text-obsidian-info font-mono transition-all active:scale-95",children:t.type})]},r))})]}),s.type==="JOB"&&s.data.latestRun&&e.jsxs("div",{children:[e.jsx("div",{className:"text-obsidian-muted text-[10px] uppercase tracking-wider mb-1",children:"Latest Run"}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{className:"w-2.5 h-2.5",style:{color:q(s.data.latestRun.state)}}),e.jsx("span",{className:"text-foreground",children:s.data.latestRun.state})]}),s.data.latestRun.durationMs&&e.jsxs("div",{className:"text-obsidian-muted",children:["Duration: ",(s.data.latestRun.durationMs/1e3).toFixed(1),"s"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-obsidian-muted text-[10px] uppercase tracking-wider mb-1",children:"Connections"}),e.jsxs("div",{className:"text-foreground",children:[s.inEdges.length," inputs · ",s.outEdges.length," outputs"]})]})]})]})]})]})]})}export{Fe as default};
