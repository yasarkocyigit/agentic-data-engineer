FROM apache/superset:latest

# Install Trino driver into the Superset venv.
# The venv has python but no pip, so we bootstrap pip first,
# then install the required packages.
USER root
RUN /app/.venv/bin/python -m ensurepip --upgrade && \
    /app/.venv/bin/python -m pip install --no-cache-dir trino sqlalchemy-trino psycopg2-binary
USER superset
